{"last_node_id":82,"last_link_id":180,"nodes":[{"id":79,"type":"Exec Python Code Script","pos":[1605,45],"size":[495,795],"flags":{},"order":1,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":178,"shape":7,"localized_name":"image1"},{"name":"image2","type":"IMAGE","link":null,"shape":7,"localized_name":"image2"},{"name":"mask1","type":"MASK","link":null,"shape":7,"localized_name":"mask1"},{"name":"mask2","type":"MASK","link":null,"shape":7,"localized_name":"mask2"},{"name":"list1","type":"*","link":null,"shape":7,"localized_name":"list1"},{"name":"dict1","type":"*","link":null,"shape":7,"localized_name":"dict1"},{"name":"any1","type":"*","link":null,"shape":7,"localized_name":"any1"},{"name":"any2","type":"*","link":null,"shape":7,"localized_name":"any2"},{"name":"any3","type":"*","link":null,"shape":7,"localized_name":"any3"},{"name":"any4","type":"*","link":null,"shape":7,"localized_name":"any4"}],"outputs":[{"name":"image1","type":"*","links":[179],"slot_index":0,"localized_name":"image1"},{"name":"image2","type":"*","links":[180],"slot_index":1,"localized_name":"image2"},{"name":"mask1","type":"*","links":null,"localized_name":"mask1"},{"name":"mask2","type":"*","links":null,"localized_name":"mask2"},{"name":"number1","type":"*","links":null,"localized_name":"number1"},{"name":"number2","type":"*","links":null,"localized_name":"number2"},{"name":"text1","type":"*","links":null,"localized_name":"text1"},{"name":"text2","type":"*","links":null,"localized_name":"text2"},{"name":"list1","type":"*","links":null,"localized_name":"list1"},{"name":"dict1","type":"*","links":null,"localized_name":"dict1"},{"name":"any1","type":"*","links":null,"localized_name":"any1"},{"name":"any2","type":"*","links":null,"localized_name":"any2"},{"name":"any3","type":"*","links":null,"localized_name":"any3"},{"name":"any4","type":"*","links":null,"localized_name":"any4"}],"properties":{},"widgets_values":["import torch\n\nr, g, b = image1.unbind(-1)\n\nluminance_image = .3 * r + .7 * g + .06 * b\nluminance_mean = torch.mean(luminance_image.unsqueeze(-1))\n\n# Adjust Contrast dynamically\ncontrast_adjust = 1.8\nnew_image = (image1.data * contrast_adjust) + (1.0 - contrast_adjust) * luminance_mean\nnew_image = torch.clamp(new_image, 0.0, 1.0)\n\n\nprint(new_image.shape)\nimage2.to(new_image)",0,0,"hello","world",true,""]},{"id":81,"type":"PreviewImage","pos":[2145,30],"size":[435,375],"flags":{},"order":2,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":179,"localized_name":"images"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":82,"type":"PreviewImage","pos":[2145,465],"size":[465,390],"flags":{},"order":3,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":180,"localized_name":"images"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":80,"type":"LoadImage","pos":[1140,225],"size":[390,465],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[178],"localized_name":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"localized_name":"MASK"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["rgb-movie-scene-H503px_W1200px-jpg-19.jpg","image"]}],"links":[[178,80,0,79,0,"IMAGE"],[179,79,0,81,0,"IMAGE"],[180,79,1,82,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.7050000000000001,"offset":[-522.2683323375189,351.83955019508807]},"node_versions":{"python-interpreter-node":"e25a59d2ccba26d29f0cd17246cac6e3e3008a35","comfy-core":"v0.3.10-33-g7da85fa"},"VHS_latentpreview":false,"VHS_latentpreviewrate":0},"version":0.4}